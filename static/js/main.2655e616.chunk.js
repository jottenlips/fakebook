(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,n){e.exports=n(96)},57:function(e,t,n){},59:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),i=n.n(o),c=(n(57),n(59),n(12)),u=n(19),l=n(7),s=n(2),m=n(50),f=function(e,t){var n=e.split("|"),a=d(n);return p(a,t)},d=function(e){return e.map(function(e){return e.split(" ")}).map(function(e){return e.filter(function(e){return e.length>0})})},p=function(e,t){return e.map(function(e){return e.map(function(n){return{notes:m.a.notes(n).map(function(e,n){return"".concat(e).concat(t+function(e){return e%2===0?1:0}(n))}),octave:t,chord:n,duration:e.length>1?"2":"1"}})})},v=n(61),h=function(e,t){var n=new v.Track,a=e.map(function(e){return new v.NoteEvent({pitch:e.notes,duration:e.duration})});console.log(e),console.log(a),n.addEvent(a),n.setTempo(t||120);var r=new v.Writer(n);return console.log(r.dataUri()),r.dataUri()},b=n(98),E=n(18),O=n.n(E),g=n(34),y=n(71),j=n(72),w=new AudioContext,I=function(){var e=Object(g.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j.instrument(w,"https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FatBoy/acoustic_grand_piano-mp3.js").then(function(e){var n=new y.Player(function(t){var n=w.currentTime;console.log(t),"Note on"===t.name?e.play(t.noteName,n,{gain:t.velocity/4}):console.log(t)});n.loadDataUri(t),n.play()});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(g.a)(O.a.mark(function e(t,n){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new y.Player(function(e){console.log(n);var t=w.currentTime;console.log(e),"Note on"===e.name&&n?n.playNote(e.noteName,"all",{duration:100*t}):console.log(e)})).loadDataUri(t),a.play();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),S=n(13);function x(){var e=Object(c.a)([""]);return x=function(){return e},e}function C(){var e=Object(c.a)(["\n  font-size: 64pt;\n"]);return C=function(){return e},e}var A=S.a.textarea(C()),_=Object(S.a)(function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1];return r.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center",paddingTop:100}},r.a.createElement("form",{onSubmit:function(e){return function(e,t,n){e.preventDefault(),t(n);var a=Object(b.a)(f(n,4)),r=h(a,240);I(r)}(e,i,o)}},r.a.createElement(A,{value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Play"})))})(x()),D=n(27),M=n(35),N=n.n(M),F=function(e){return function(t){var n=new N.a.PolySynth({oscillator:{type:"fmsquare",modulationType:"sawtooth",modulationIndex:3,harmonicity:3.4},envelope:{attack:.001,decay:.1,sustain:.1,release:.1}}).toMaster(),a=(new N.a.FMSynth).toMaster();return r.a.createElement(e,Object.assign({synth:n,fmSynth:a},t),t.children)}},B=n(99),P=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),m=l[0],f=l[1],d=e.noteEvent;Object(D.b)(function(){t.current.rotation.x=t.current.rotation.y+=.01,t.current.rotation.y=d&&d.includes("C")?t.current.rotation.y+=1:t.current.rotation.y});var p=t.current?t.current.rotation.y/3:1;return r.a.createElement("mesh",Object.assign({},e,{ref:t,scale:m?[1.5,1.5,1.5]:[1,1,1],onClick:function(n){f(!m),console.log(t.current.rotation.y);var a=function(e,t){var n=Math.ceil(5*e)%Object(B.a)(t);return console.log(t[n]),t[n]}(p,e.notes);e.synth&&e.synth.triggerAttackRelease(a,.5),e.midiOut&&e.midiOut.playNote(a,"all",{duration:1e3})},onPointerOver:function(e){return c(!0)},onPointerOut:function(e){return c(!1)}}),r.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:i?"#FFFF00":"#00ffff"}))},T=F(P),G=function(e){return r.a.createElement(D.a,null,r.a.createElement("ambientLight",null),r.a.createElement("pointLight",{position:[10,10,10]}),e.children)},z=function(e){return r.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center"}},r.a.createElement("div",{style:{justifyContent:"space-between"}},r.a.createElement("select",null,e.midiIns&&e.midiIns.map(function(t){return r.a.createElement("option",{value:t._midiInput.id,onChange:function(){return e.setMidiInId(t._midiInput.id)}},t._midiInput.name)}))),r.a.createElement(G,null,r.a.createElement(T,{noteEvent:e.noteEvent,notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[0,0,0]})))};function L(){var e=Object(c.a)(["\n  font-size: 32pt;\n  font-family: Arial;\n"]);return L=function(){return e},e}var R=S.a.textarea(L()),U=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)([["A4","C4","D4","E4","G4"],["G4","A4","B4","Db4","Eb4","F4"]]),u=Object(s.a)(c,2),l=u[0],m=u[1];return console.log(e,m),r.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center",paddingTop:100}},r.a.createElement("select",null,e.midiOuts&&e.midiOuts.map(function(t){return r.a.createElement("option",{value:t._midiOutput.id,onChange:function(){return e.setMidiOutId(t._midiInput.id)}},t._midiOutput.name)})),r.a.createElement("form",{onSubmit:function(t){return function(e,t,n,a){e.preventDefault(),t(n);var r=Object(b.a)(f(n,4)),o=h(r,240);k(o,a)}(t,i,o,e.midiOut)}},r.a.createElement(R,{value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Play"})),r.a.createElement(G,null,l.map(function(t,n){return r.a.createElement(P,{key:n,midiOut:e.midiOut,notes:t,position:[2*-n,0,0]})})))},W=n(9),J=n.n(W),q=n(97),$=Object(q.a)(F,function(e){return function(t){var n=Object(a.useState)(),o=Object(s.a)(n,2),i=o[0],c=o[1],u=Object(a.useState)(),l=Object(s.a)(u,2),m=l[0],f=l[1],d=Object(a.useState)(),p=Object(s.a)(d,2),v=p[0],h=p[1],b=Object(a.useState)(),E=Object(s.a)(b,2),O=E[0],g=E[1],y=Object(a.useState)(),j=Object(s.a)(y,2),w=j[0],I=j[1],k=Object(a.useState)(),S=Object(s.a)(k,2),x=S[0],C=S[1];return Object(a.useEffect)(function(){J.a.enable(function(){if(console.log(J.a.inputs),console.log(J.a.outputs),C(J.a.inputs),I(J.a.outputs),Object(B.a)(J.a.inputs)>0&&Object(B.a)(J.a.outputs)>0){var e=J.a.getInputById(O||J.a.inputs[1]._midiInput.id),n=J.a.getOutputById(m||J.a.outputs[1]._midiOutput.id);h(n),e.addListener("noteon","all",function(e){console.log("Received 'noteon' message ("+e.note.name+e.note.octave+").");var n=e.note.name+e.note.octave;c(n),t.synth.triggerAttackRelease(n,1.5)}),e.removeListener("noteoff")}})},[m,O,x,w]),r.a.createElement(e,Object.assign({noteEvent:i,midiOuts:w,setMidiOutId:f,midiIns:x,setMidiInId:g,midiOut:v},t),t.children)}});function H(){var e=Object(c.a)(["\n  height: 100%;\n  width: 50;\n  left: 0;\n  z-index: 20;\n  position: fixed;\n  flex: 1;\n  background-color: #ff00ff;\n  justify-content: left;\n"]);return H=function(){return e},e}var K=S.a.div(H()),Q=$(function(e){return r.a.createElement(u.a,{basename:"/"},r.a.createElement("div",{style:{flexDirection:"row"}},r.a.createElement(K,null,r.a.createElement("div",null,r.a.createElement(u.b,{to:"/fakebook"},"Fakebook")),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/midi-in"},"midi-in")),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/midi-out"},"midi-out"))),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/fakebook"},r.a.createElement(_,null)),r.a.createElement(l.a,{path:"/midi-in"},r.a.createElement(z,e)),r.a.createElement(l.a,{path:"/midi-out"},r.a.createElement(U,e)),r.a.createElement(l.a,{path:"/",component:_}))))}),V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[52,2,1]]]);
//# sourceMappingURL=main.2655e616.chunk.js.map