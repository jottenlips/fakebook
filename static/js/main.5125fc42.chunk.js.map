{"version":3,"sources":["util/songParser.js","util/composeMidiFile.js","util/playMidi.js","samples/SoundFonts.js","components/Fakebook.jsx","util/withSynth.jsx","components/Box.jsx","components/ThreeDCanvas.jsx","components/MidiIn.jsx","components/MidiOut.jsx","util/withMidi.jsx","Routes.jsx","App.jsx","serviceWorker.js","index.js"],"names":["parseSong","_ref","chords","octave","loop","loopedChords","repeat","join","console","log","measures","split","parsedChords","parseChords","song","appendProgressionDetails","map","measure","filter","chord","length","notes","tonal","note","index","concat","spreadOctave","duration","MidiWriter","require","composeMidiFile","tempo","bassLine","arguments","undefined","solo","track","Track","bassTrack","soloTrack","NoteEvent","pitch","slice","Infinity","event","addEvent","generateBassLine","generateSolo","setTempo","write","Writer","dataUri","getRandomNote","weightedNotes","distributeNoteProbability","reverse","w2","w3","Math","floor","random","charAt","MidiPlayer","Soundfont","ac","AudioContext","playMidi","Object","asyncToGenerator","regenerator_default","a","mark","_callee","instrument","wrap","_context","prev","next","then","Player","time","currentTime","name","play","noteName","gain","velocity","loadDataUri","stop","_x","_x2","apply","this","playMidiThroughOutput","_ref2","_callee2","output","_context2","playNote","_x3","_x4","soundFonts","Space","styled","div","_templateObject","JazzText","textarea","_templateObject2","Text","text","_templateObject3","Options","_templateObject4","props","_useState","useState","_useState2","slicedToArray","setChords","_useState3","_useState4","_useState5","_useState6","setLoop","_useState7","_useState8","bass","setBass","_useState9","_useState10","setInstrument","react_default","createElement","style","width","height","alignItems","paddingTop","onSubmit","e","allChords","preventDefault","flatten","midiDataUri","handleSubmit","value","onChange","target","type","font","_templateObject5","distortion","Tone","Distortion","tremolo","Tremolo","start","withSynth","Cmp","synth","PolySynth","oscillator","modulationType","modulationIndex","harmonicity","envelope","attack","decay","sustain","release","chain","Master","fmSynth","FMSynth","toMaster","assign","children","Box","mesh","useRef","hovered","setHover","active","setActive","noteEvent","useFrame","current","rotation","x","y","includes","rotationY","ref","scale","onClick","ceil","noteFromRotation","triggerAttackRelease","midiOut","onPointerOver","onPointerOut","attach","args","color","SynthBox","ThreeDCanvas","web","position","MidiIn","justifyContent","midiIns","input","_midiInput","id","setMidiInId","ThreeDCanvas_ThreeDCanvas","MidiText","MidiOut_templateObject","MidiOut","noteBoxes","setNoteBoxes","Fragment","midiOuts","_midiOutput","setMidiOutId","i","Box_Box","key","withMidi","compose","setNoteEvent","midiOutId","setMidiOut","midiInId","setMidiOuts","_useState11","_useState12","setMidiIns","useEffect","WebMidi","enable","inputs","outputs","getInputById","getOutputById","addListener","removeListener","SideNav","Routes_templateObject","react_router_dom","basename","flexDirection","to","react_router","path","components_Fakebook","MidiIn_MidiIn","components_MidiOut","component","Fakebook","App","className","src_Routes","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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AhB,IAAAjB,EAAA,OAAAV,EAAAC,EAAAI,KAAA,SAAAuB,GAAA,cAAAA,EAAArB,KAAAqB,EAAApB,MAAA,QAC7BE,EAAS,IAAIjB,EAAWiB,OAAO,SAAAnC,GACnCpC,QAAQC,IAAIuF,GACZ,IAAMhB,EAAOhB,EAAGiB,YAChBzE,QAAQC,IAAImC,GACG,YAAfA,EAAMsC,MAAsBc,EACxBA,EAAOE,SAAStD,EAAMwC,SAAU,MAAO,CAAEzD,SAAiB,IAAPqD,IACnDxE,QAAQC,IAAImC,MAEX2C,YAAYpC,GACnB4B,EAAOI,OAV4B,wBAAAc,EAAAT,SAAAO,MAAH,gBAAAI,EAAAC,GAAA,OAAAN,EAAAH,MAAAC,KAAA3D,YAAA,WCrBrBoE,EAAa,CACxB,YACA,gBACA,uBACA,wBACA,wBACA,QACA,WACA,WACA,UACA,QACA,eACA,UACA,aACA,eACA,gBACA,eACA,wBACA,UACA,QACA,aACA,eACA,WACA,WACA,aACA,oBACA,gBACA,WACA,uBACA,qBACA,uBACA,wBACA,uBACA,wBACA,mBACA,mBACA,eACA,SACA,QACA,cACA,gBACA,YACA,kBACA,eACA,kBACA,kBACA,eACA,cACA,aACA,eACA,oBACA,mBACA,UACA,YACA,cACA,aACA,kBACA,UACA,OACA,gBACA,kBACA,kBACA,eACA,iBACA,eACA,gBACA,oBACA,UACA,cACA,YACA,gBACA,OACA,UACA,gBACA,kBACA,oBACA,gBACA,aACA,kBACA,cACA,cACA,iBACA,aACA,cACA,YACA,mBACA,UACA,oBACA,WACA,aACA,iBACA,aACA,WACA,aACA,WACA,SACA,QACA,cACA,cACA,cACA,cACA,oBACA,oBACA,eACA,eACA,gBACA,gBACA,cACA,aACA,kBACA,kBACA,aACA,kBACA,iBACA,YACA,UACA,cACA,kBACA,WACA,UACA,OACA,gBACA,aACA,QACA,SACA,aACA,UACA,YACA,yhBCxHF,IAoFMC,EAAQC,IAAOC,IAAVC,KAGLC,EAAWH,IAAOI,SAAVC,KAMRC,EAAON,IAAOO,KAAVC,KAIJC,EAAUT,IAAOC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","file":"static/js/main.5125fc42.chunk.js","sourcesContent":["import * as tonal from \"tonal\";\nimport { repeat } from \"ramda\";\n\nexport const parseSong = ({ chords, octave, loop }) => {\n  const loopedChords = repeat(chords, loop).join(\"|\");\n  console.log(loopedChords, \":::LOOP\");\n  const measures = loopedChords.split(\"|\");\n  const parsedChords = parseChords(measures);\n  const song = appendProgressionDetails(parsedChords, octave);\n  console.log(song, \":::SONG\");\n  return song;\n};\n\nconst parseChords = measures => {\n  return measures\n    .map(measure => measure.split(\" \"))\n    .map(measure => measure.filter(chord => chord.length > 0));\n};\n\nconst spreadOctave = index => (index % 2 === 0 ? 1 : 0);\n\nconst appendProgressionDetails = (chords, octave) => {\n  return chords.map(measure =>\n    measure.map(chord => ({\n      notes: tonal.Chord.notes(chord).map(\n        (note, index) => `${note}${octave + spreadOctave(index)}`\n      ),\n      octave,\n      chord,\n      duration: measure.length > 1 ? `2` : `1`\n    }))\n  );\n};\n","import { repeat, slice, concat, reverse } from \"ramda\";\n\nconst MidiWriter = require(\"midi-writer-js\");\n\nexport const composeMidiFile = (\n  chords,\n  tempo,\n  bassLine = false,\n  solo = false\n) => {\n  const track = new MidiWriter.Track();\n  const bassTrack = new MidiWriter.Track();\n  const soloTrack = new MidiWriter.Track();\n\n  // countIn &&\n  //   track.addEvent(\n  //     new MidiWriter.NoteEvent({\n  //       pitch: \"C5\",\n  //       duration: \"4\",\n  //       repeat: 4\n  //     })\n  //   );\n  // countIn &&\n  //   bassTrack.addEvent(\n  //     new MidiWriter.NoteEvent({\n  //       pitch: \"C5\",\n  //       duration: \"4\",\n  //       repeat: 4\n  //     })\n  //   );\n\n  const chordEvents = chords.map(chord =>\n    // half length chord\n    chord.duration === \"2\"\n      ? repeat(\n          new MidiWriter.NoteEvent({\n            pitch: slice(1, Infinity, chord.notes),\n            duration: \"2\"\n          }),\n          1\n        )\n      : // full length chord\n        repeat(\n          new MidiWriter.NoteEvent({\n            pitch: slice(1, Infinity, chord.notes),\n            duration: \"1\"\n          }),\n          1\n        )\n  );\n  // track.addEvent(chordEvents);\n  chordEvents.map(event => track.addEvent(event));\n  // countIn &&\n  chords.map(chord => {\n    bassLine && generateBassLine(chord, bassTrack);\n  });\n\n  chords.map(chord => {\n    solo && generateSolo(chord, soloTrack);\n  });\n\n  track.setTempo(tempo || 120);\n  const write = new MidiWriter.Writer([track, bassTrack]);\n  console.log(write.dataUri());\n  return write.dataUri();\n};\n\nconst getRandomNote = notes => {\n  //root note most probable\n  const weightedNotes = distributeNoteProbability(reverse(notes));\n  // then 3rd\n  const w2 = distributeNoteProbability(weightedNotes);\n  // then 5th\n  const w3 = distributeNoteProbability(w2);\n  return w3[Math.floor(Math.random() * w3.length)];\n};\n\nconst distributeNoteProbability = notes =>\n  concat(notes, slice(1, Infinity, notes));\n\nconst generateBassLine = (chord, track) => {\n  return chord.duration === \"2\"\n    ? (track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ))\n    : (track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ));\n};\n\nconst generateSolo = (chord, track) => {\n  return chord.duration === \"2\"\n    ? (track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ))\n    : (track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ),\n      track.addEvent(\n        new MidiWriter.NoteEvent({\n          pitch: `${getRandomNote(chord.notes).charAt(0)}2`,\n          duration: \"4\"\n        })\n      ));\n};\n","const MidiPlayer = require(\"midi-player-js\");\nconst Soundfont = require(\"soundfont-player\");\nconst ac = new AudioContext();\n// https://github.com/gleitz/midi-js-soundfonts\nexport const playMidi = async (dataUri, instrument) => {\n  Soundfont.instrument(\n    ac,\n    `https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FatBoy/${instrument}-mp3.js`\n  ).then(instrument => {\n    const Player = new MidiPlayer.Player(event => {\n      const time = ac.currentTime;\n      console.log(event);\n      event.name === \"Note on\"\n        ? instrument.play(event.noteName, time, { gain: event.velocity / 4 })\n        : console.log(event);\n    });\n    Player.loadDataUri(dataUri);\n    Player.play();\n  });\n};\n\nexport const playMidiThroughOutput = async (dataUri, output) => {\n  const Player = new MidiPlayer.Player(event => {\n    console.log(output);\n    const time = ac.currentTime;\n    console.log(event);\n    event.name === \"Note on\" && output\n      ? output.playNote(event.noteName, \"all\", { duration: time * 100 })\n      : console.log(event);\n  });\n  Player.loadDataUri(dataUri);\n  Player.play();\n};\n","export const soundFonts = [\n  \"accordion\",\n  \"acoustic_bass\",\n  \"acoustic_grand_piano\",\n  \"acoustic_guitar_nylon\",\n  \"acoustic_guitar_steel\",\n  \"agogo\",\n  \"alto_sax\",\n  \"applause\",\n  \"bagpipe\",\n  \"banjo\",\n  \"baritone_sax\",\n  \"bassoon\",\n  \"bird_tweet\",\n  \"blown_bottle\",\n  \"brass_section\",\n  \"breath_noise\",\n  \"bright_acoustic_piano\",\n  \"celesta\",\n  \"cello\",\n  \"choir_aahs\",\n  \"church_organ\",\n  \"clarinet\",\n  \"clavinet\",\n  \"contrabass\",\n  \"distortion_guitar\",\n  \"drawbar_organ\",\n  \"dulcimer\",\n  \"electric_bass_finger\",\n  \"electric_bass_pick\",\n  \"electric_grand_piano\",\n  \"electric_guitar_clean\",\n  \"electric_guitar_jazz\",\n  \"electric_guitar_muted\",\n  \"electric_piano_1\",\n  \"electric_piano_2\",\n  \"english_horn\",\n  \"fiddle\",\n  \"flute\",\n  \"french_horn\",\n  \"fretless_bass\",\n  \"fx_1_rain\",\n  \"fx_2_soundtrack\",\n  \"fx_3_crystal\",\n  \"fx_4_atmosphere\",\n  \"fx_5_brightness\",\n  \"fx_6_goblins\",\n  \"fx_7_echoes\",\n  \"fx_8_scifi\",\n  \"glockenspiel\",\n  \"guitar_fret_noise\",\n  \"guitar_harmonics\",\n  \"gunshot\",\n  \"harmonica\",\n  \"harpsichord\",\n  \"helicopter\",\n  \"honkytonk_piano\",\n  \"kalimba\",\n  \"koto\",\n  \"lead_1_square\",\n  \"lead_2_sawtooth\",\n  \"lead_3_calliope\",\n  \"lead_4_chiff\",\n  \"lead_5_charang\",\n  \"lead_6_voice\",\n  \"lead_7_fifths\",\n  \"lead_8_bass__lead\",\n  \"marimba\",\n  \"melodic_tom\",\n  \"music_box\",\n  \"muted_trumpet\",\n  \"oboe\",\n  \"ocarina\",\n  \"orchestra_hit\",\n  \"orchestral_harp\",\n  \"overdriven_guitar\",\n  \"pad_1_new_age\",\n  \"pad_2_warm\",\n  \"pad_3_polysynth\",\n  \"pad_4_choir\",\n  \"pad_5_bowed\",\n  \"pad_6_metallic\",\n  \"pad_7_halo\",\n  \"pad_8_sweep\",\n  \"pan_flute\",\n  \"percussive_organ\",\n  \"piccolo\",\n  \"pizzicato_strings\",\n  \"recorder\",\n  \"reed_organ\",\n  \"reverse_cymbal\",\n  \"rock_organ\",\n  \"seashore\",\n  \"shakuhachi\",\n  \"shamisen\",\n  \"shanai\",\n  \"sitar\",\n  \"slap_bass_1\",\n  \"slap_bass_2\",\n  \"soprano_sax\",\n  \"steel_drums\",\n  \"string_ensemble_1\",\n  \"string_ensemble_2\",\n  \"synth_bass_1\",\n  \"synth_bass_2\",\n  \"synth_brass_1\",\n  \"synth_brass_2\",\n  \"synth_choir\",\n  \"synth_drum\",\n  \"synth_strings_1\",\n  \"synth_strings_2\",\n  \"taiko_drum\",\n  \"tango_accordion\",\n  \"telephone_ring\",\n  \"tenor_sax\",\n  \"timpani\",\n  \"tinkle_bell\",\n  \"tremolo_strings\",\n  \"trombone\",\n  \"trumpet\",\n  \"tuba\",\n  \"tubular_bells\",\n  \"vibraphone\",\n  \"viola\",\n  \"violin\",\n  \"voice_oohs\",\n  \"whistle\",\n  \"woodblock\",\n  \"xylophone\"\n];\n","import React, { useState } from \"react\";\nimport { parseSong } from \"../util/songParser\";\nimport { composeMidiFile } from \"../util/composeMidiFile\";\nimport { flatten } from \"ramda\";\nimport { playMidi } from \"../util/playMidi\";\nimport styled from \"styled-components\";\nimport { soundFonts } from \"../samples/SoundFonts\";\n\nconst handleSubmit = ({ e, allChords, tempo, instrument, loop, bass }) => {\n  e.preventDefault();\n  const chords = flatten(parseSong({ chords: allChords, octave: 4, loop }));\n  console.log(chords, \":::CHORDS\");\n  const midiDataUri = composeMidiFile(chords, tempo, bass);\n  playMidi(midiDataUri, instrument);\n};\n\nconst Fakebook = props => {\n  const [chords, setChords] = useState(\n    \"BMaj7 D7 | GMaj7 Bb7 | EbMaj7 | Am7 D7 | GMaj7 Bb7 | EbMaj7 F#7 | BMaj7| Fm7 Bb7 | EbMaj7 | Am7 D7 | GMaj7 | C#m7 F#7 | BMaj7 | Fm7 Bb7| EbMaj7 | C#m7 F#7\"\n  );\n  const [tempo, setTempo] = useState(240);\n  const [loop, setLoop] = useState(1);\n  const [bass, setBass] = useState(false);\n\n  const [instrument, setInstrument] = useState(\"bright_acoustic_piano\");\n\n  return (\n    <div\n      style={{\n        width: \"100vh\",\n        height: \"100vh\",\n        alignItems: \"center\",\n        paddingTop: 100\n      }}\n    >\n      <form\n        onSubmit={e =>\n          handleSubmit({\n            e,\n            allChords: chords,\n            tempo,\n            instrument,\n            loop,\n            bass\n          })\n        }\n      >\n        <JazzText value={chords} onChange={e => setChords(e.target.value)} />\n        <Options>\n          <Text>Tempo:</Text>\n          <input\n            value={tempo}\n            type=\"number\"\n            onChange={e => {\n              setTempo(e.target.value);\n            }}\n          />\n          <Space />\n\n          <Text>Repeat:</Text>\n          <input\n            value={loop}\n            type=\"number\"\n            onChange={e => {\n              setLoop(e.target.value);\n            }}\n          />\n          <Space />\n\n          <Text>Instrument:</Text>\n\n          <select\n            value={instrument}\n            onChange={e => setInstrument(e.target.value)}\n          >\n            {soundFonts.map(font => (\n              <option>{font}</option>\n            ))}\n          </select>\n          <Space />\n          <Text>Bassline:</Text>\n          <select value={bass} onChange={e => setBass(e.target.value)}>\n            <option value={true}>{\"true\"}</option>\n            <option value={false}>{\"false\"}</option>\n          </select>\n          <input type=\"submit\" value=\"Play\" />\n        </Options>\n      </form>\n    </div>\n  );\n};\n\nconst Space = styled.div`\n  padding: 20;\n`;\nconst JazzText = styled.textarea`\n  font-size: 32pt;\n  width: 800px;\n  height: 400px;\n`;\n\nconst Text = styled.text`\n  font-size: 12pt;\n`;\n\nconst Options = styled.div`\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100px;\n`;\n\nexport default styled(Fakebook)``;\n","import React from \"react\";\nimport Tone from \"tone\";\nvar distortion = new Tone.Distortion(0.6);\nvar tremolo = new Tone.Tremolo().start();\n\nexport const withSynth = Cmp => props => {\n  const synth = new Tone.PolySynth({\n    oscillator: {\n      type: \"fmsquare\",\n      modulationType: \"sawtooth\",\n      modulationIndex: 3,\n      harmonicity: 3.4\n    },\n\n    envelope: {\n      attack: 0.001,\n      decay: 0.1,\n      sustain: 0.1,\n      release: 0.1\n    }\n  }).chain(distortion, tremolo, Tone.Master);\n\n  const fmSynth = new Tone.FMSynth().toMaster();\n\n  return (\n    <Cmp synth={synth} fmSynth={fmSynth} {...props}>\n      {props.children}\n    </Cmp>\n  );\n};\n","import React, { useRef, useState } from \"react\";\nimport { useFrame } from \"react-three-fiber\";\nimport { withSynth } from \"../util/withSynth\";\nimport { length } from \"ramda\";\n\nconst noteFromRotation = (rotation, notes) => {\n  const index = Math.ceil(rotation * 5) % length(notes);\n  console.log(notes[index]);\n  return notes[index];\n};\n\nexport const Box = props => {\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const [active, setActive] = useState(false);\n  const noteEvent = props.noteEvent;\n  // Rotate mesh every frame, this is outside of React without overhead\n  useFrame(() => {\n    mesh.current.rotation.x = mesh.current.rotation.y += 0.01;\n    mesh.current.rotation.y =\n      noteEvent && noteEvent.includes(\"C\")\n        ? (mesh.current.rotation.y += 1)\n        : mesh.current.rotation.y;\n\n    // mesh.current.position.z = active\n    //   ? (mesh.current.position.z += 0.01)\n    //   : (mesh.current.position.z -= 0.01);\n  });\n  const rotationY = mesh.current ? mesh.current.rotation.y / 3 : 1;\n  return (\n    <mesh\n      {...props}\n      ref={mesh}\n      scale={!active ? [0.5, 0.5, 0.5] : [0.7, 0.7, 0.7]}\n      onClick={e => {\n        setActive(!active);\n        console.log(mesh.current.rotation.y);\n        const note = noteFromRotation(rotationY, props.notes);\n        props.synth && props.synth.triggerAttackRelease(note, 0.5);\n        props.midiOut &&\n          props.midiOut.playNote(note, \"all\", { duration: 1000 });\n      }}\n      onPointerOver={e => setHover(true)}\n      onPointerOut={e => setHover(false)}\n    >\n      <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n      <meshStandardMaterial\n        attach=\"material\"\n        color={hovered ? \"#FFFF00\" : \"#00ffff\"}\n      />\n    </mesh>\n  );\n};\n\nexport const SynthBox = withSynth(Box);\n","import React from \"react\";\nimport { Canvas } from \"react-three-fiber\";\n\nexport const ThreeDCanvas = props => {\n  return (\n    <Canvas style={{ width: \"100vw\", height: \"100vh\" }}>\n      <ambientLight />\n      <pointLight position={[10, 10, 10]} />\n      {props.children}\n    </Canvas>\n  );\n};\n","import React from \"react\";\nimport { SynthBox } from \"./Box\";\nimport { ThreeDCanvas } from \"./ThreeDCanvas\";\n\nexport const MidiIn = props => {\n  return (\n    <div style={{ width: \"100vh\", height: \"100vh\", alignItems: \"center\" }}>\n      <div style={{ justifyContent: \"space-between\" }}>\n        <select>\n          {props.midiIns &&\n            props.midiIns.map(input => (\n              <option\n                value={input._midiInput.id}\n                onChange={() => props.setMidiInId(input._midiInput.id)}\n              >\n                {input._midiInput.name}\n              </option>\n            ))}\n        </select>\n      </div>\n      <ThreeDCanvas>\n        <SynthBox\n          noteEvent={props.noteEvent}\n          notes={[\"A4\", \"C5\", \"D3\", \"E4\", \"G4\", \"A3\", \"C4\", \"D5\", \"E4\", \"G4\"]}\n          position={[0, 0, 0]}\n        />\n      </ThreeDCanvas>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { parseSong } from \"../util/songParser\";\nimport { composeMidiFile } from \"../util/composeMidiFile\";\nimport { flatten } from \"ramda\";\nimport { playMidiThroughOutput } from \"../util/playMidi\";\nimport styled from \"styled-components\";\nimport { Box } from \"./Box\";\nimport { ThreeDCanvas } from \"./ThreeDCanvas\";\n\nconst handleSubmit = ({ e, setChords, allChords, output, tempo, loop }) => {\n  e.preventDefault();\n  const chords = flatten(parseSong({ chords: allChords, octave: 4, loop }));\n  const midiDataUri = composeMidiFile(chords, tempo);\n  playMidiThroughOutput(midiDataUri, output);\n};\n\nconst MidiOut = props => {\n  const [chords, setChords] = useState(\"\");\n  const [tempo, setTempo] = useState(160);\n  const [loop, setLoop] = useState(1);\n\n  const [noteBoxes, setNoteBoxes] = useState([\n    [\"A4\", \"C4\", \"D4\", \"E4\", \"G4\"],\n    [\"G4\", \"A4\", \"B4\", \"Db4\", \"Eb4\", \"F4\"],\n    [\"A5\", \"Db5\", \"Eb5\", \"E5\", \"G2\"],\n    [\"G4\", \"A4\", \"B4\", \"Db4\", \"Eb4\", \"F4\"],\n    [\"A5\", \"Db5\", \"Eb5\", \"E5\", \"G2\"]\n  ]);\n\n  console.log(props, setNoteBoxes);\n  return (\n    <>\n      <select>\n        {props.midiOuts &&\n          props.midiOuts.map(output => (\n            <option\n              value={output._midiOutput.id}\n              onChange={() => props.setMidiOutId(output._midiInput.id)}\n            >\n              {output._midiOutput.name}\n            </option>\n          ))}\n      </select>\n      <form\n        onSubmit={e =>\n          handleSubmit({\n            e,\n            allChords: chords,\n            output: props.midiOut,\n            loop,\n            tempo\n          })\n        }\n      >\n        <MidiText value={chords} onChange={e => setChords(e.target.value)} />\n        <input type=\"submit\" value=\"Play\" />\n      </form>\n      <div\n        style={{\n          width: \"100vh\",\n          height: \"100vh\",\n          alignItems: \"center\",\n          paddingTop: 100\n        }}\n      >\n        <input\n          value={tempo}\n          type=\"number\"\n          onChange={e => {\n            setTempo(e.target.value);\n          }}\n        />\n        <input\n          value={loop}\n          type=\"number\"\n          onChange={e => {\n            setLoop(e.target.value);\n          }}\n        />\n        <ThreeDCanvas style={{ width: \"100vw\", height: \"100vh\" }}>\n          {noteBoxes.map((notes, i) =>\n            i % 2 !== 0 ? (\n              <Box\n                key={i}\n                midiOut={props.midiOut}\n                notes={notes}\n                position={[-i * 2, -i * 0.5, 0]}\n              />\n            ) : (\n              <Box\n                key={i}\n                midiOut={props.midiOut}\n                notes={notes}\n                position={[i * 0.8, i * 0.5, 0]}\n              />\n            )\n          )}\n        </ThreeDCanvas>\n      </div>\n    </>\n  );\n};\n\nconst MidiText = styled.textarea`\n  font-size: 32pt;\n  font-family: Arial;\n`;\n\nexport default MidiOut;\n","import React, { useState, useEffect } from \"react\";\nimport WebMidi from \"webmidi\";\nimport { withSynth } from \"./withSynth\";\nimport { compose, length } from \"ramda\";\n\nexport const withWebMidi = Cmp => props => {\n  const [noteEvent, setNoteEvent] = useState();\n  const [midiOutId, setMidiOutId] = useState();\n  const [midiOut, setMidiOut] = useState();\n  // const [midiIn, setMidiIn] = useState();\n  const [midiInId, setMidiInId] = useState();\n  const [midiOuts, setMidiOuts] = useState();\n  const [midiIns, setMidiIns] = useState();\n\n  useEffect(() => {\n    WebMidi.enable(() => {\n      console.log(WebMidi.inputs);\n      console.log(WebMidi.outputs);\n      setMidiIns(WebMidi.inputs);\n      setMidiOuts(WebMidi.outputs);\n      if (length(WebMidi.inputs) > 0 && length(WebMidi.outputs) > 0) {\n        const input = WebMidi.getInputById(\n          midiInId || WebMidi.inputs[1]._midiInput.id\n        );\n        // const output = WebMidi.getOutputById(\"1295864820\");\n        const output = WebMidi.getOutputById(\n          midiOutId || WebMidi.outputs[1]._midiOutput.id\n        );\n\n        setMidiOut(output);\n        input.addListener(\"noteon\", \"all\", e => {\n          console.log(\n            \"Received 'noteon' message (\" + e.note.name + e.note.octave + \").\"\n          );\n          const note = e.note.name + e.note.octave;\n          setNoteEvent(note);\n          props.synth.triggerAttackRelease(note, 1.5);\n        });\n        input.removeListener(\"noteoff\");\n      }\n    });\n  }, [midiOutId, midiInId, midiIns, midiOuts]);\n\n  return (\n    <Cmp\n      noteEvent={noteEvent}\n      midiOuts={midiOuts}\n      setMidiOutId={setMidiOutId}\n      midiIns={midiIns}\n      setMidiInId={setMidiInId}\n      midiOut={midiOut}\n      {...props}\n    >\n      {props.children}\n    </Cmp>\n  );\n};\n\nexport const withMidi = compose(withSynth, withWebMidi);\n","import React from \"react\";\n\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport Fakebook from \"./components/Fakebook\";\nimport { MidiIn } from \"./components/MidiIn\";\nimport MidiOut from \"./components/MidiOut\";\nimport { withMidi } from \"./util/withMidi\";\nimport styled from \"styled-components\";\n\nexport const Routes = props => {\n  return (\n    <Router basename={\"/\"}>\n      <div style={{ flexDirection: \"row\" }}>\n        <SideNav>\n          <div>\n            <Link to=\"/fakebook\">Jazzbot</Link>\n          </div>\n          <div>\n            <Link to=\"/midi-in\">midi-in</Link>\n          </div>\n          <div>\n            <Link to=\"/midi-out\">midi-out</Link>\n          </div>\n          {/* <Link to=\"/midi-chat\">midi-chat</Link> */}\n        </SideNav>\n        <Switch>\n          <Route path=\"/fakebook\">\n            <Fakebook />\n          </Route>\n          <Route path=\"/midi-in\">\n            <MidiIn {...props} />\n          </Route>\n          <Route path=\"/midi-out\">\n            <MidiOut {...props} />\n          </Route>\n          <Route path=\"/\" component={Fakebook}></Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nconst SideNav = styled.div`\n  height: 100%;\n  width: 50;\n  left: 0;\n  z-index: 20;\n  position: fixed;\n  flex: 1;\n  background-color: #ff00ff;\n  justify-content: left;\n`;\n\nexport default withMidi(Routes);\n","import React from \"react\";\nimport \"./App.css\";\nimport Routes from \"./Routes\";\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Routes />\n      </header>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}