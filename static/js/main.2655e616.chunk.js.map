{"version":3,"sources":["util/songParser.js","util/composeMidiFile.js","util/playMidi.js","components/Fakebook.jsx","util/withSynth.jsx","components/Box.jsx","components/ThreeDCanvas.jsx","components/MidiIn.jsx","components/MidiOut.jsx","util/withMidi.jsx","Routes.jsx","App.jsx","serviceWorker.js","index.js"],"names":["parseSong","rawChords","octave","measures","split","chords","parseChords","appendProgressionDetails","map","measure","filter","chord","length","notes","tonal","note","index","concat","spreadOctave","duration","MidiWriter","require","composeMidiFile","tempo","track","Track","chordEvents","NoteEvent","pitch","console","log","addEvent","setTempo","write","Writer","dataUri","MidiPlayer","Soundfont","ac","AudioContext","playMidi","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","instrument","then","Player","event","time","currentTime","name","play","noteName","gain","velocity","loadDataUri","stop","_x","apply","this","arguments","playMidiThroughOutput","_ref2","_callee2","output","_context2","playNote","_x2","_x3","JazzText","styled","textarea","_templateObject","props","_useState","useState","_useState2","slicedToArray","setChords","react_default","createElement","style","width","height","alignItems","paddingTop","onSubmit","e","allChords","preventDefault","flatten","midiDataUri","handleSubmit","value","onChange","target","type","_templateObject2","withSynth","Cmp","synth","Tone","PolySynth","oscillator","modulationType","modulationIndex","harmonicity","envelope","attack","decay","sustain","release","toMaster","fmSynth","FMSynth","assign","children","Box","mesh","useRef","hovered","setHover","_useState3","_useState4","active","setActive","noteEvent","useFrame","current","rotation","x","y","includes","rotationY","ref","scale","onClick","Math","ceil","noteFromRotation","triggerAttackRelease","midiOut","onPointerOver","onPointerOut","attach","args","color","SynthBox","ThreeDCanvas","web","position","MidiIn","justifyContent","midiIns","input","_midiInput","id","setMidiInId","ThreeDCanvas_ThreeDCanvas","MidiText","MidiOut_templateObject","MidiOut","noteBoxes","setNoteBoxes","midiOuts","_midiOutput","setMidiOutId","i","Box_Box","key","withMidi","compose","setNoteEvent","midiOutId","_useState5","_useState6","setMidiOut","_useState7","_useState8","midiInId","_useState9","_useState10","setMidiOuts","_useState11","_useState12","setMidiIns","useEffect","WebMidi","enable","inputs","outputs","getInputById","getOutputById","addListener","removeListener","SideNav","div","Routes_templateObject","react_router_dom","basename","flexDirection","to","react_router","path","components_Fakebook","MidiIn_MidiIn","components_MidiOut","component","Fakebook","App","className","src_Routes","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2655e616.chunk.js","sourcesContent":["import * as tonal from \"tonal\";\n\nexport const parseSong = (rawChords, octave) => {\n  const measures = rawChords.split(\"|\");\n  const chords = parseChords(measures);\n  const song = appendProgressionDetails(chords, octave);\n  return song;\n};\n\nconst parseChords = measures => {\n  return measures\n    .map(measure => measure.split(\" \"))\n    .map(measure => measure.filter(chord => chord.length > 0));\n};\n\nconst spreadOctave = index => (index % 2 === 0 ? 1 : 0);\n\nconst appendProgressionDetails = (chords, octave) => {\n  return chords.map(measure =>\n    measure.map(chord => ({\n      notes: tonal.Chord.notes(chord).map(\n        (note, index) => `${note}${octave + spreadOctave(index)}`\n      ),\n      octave,\n      chord,\n      duration: measure.length > 1 ? `2` : `1`\n    }))\n  );\n};\n","const MidiWriter = require(\"midi-writer-js\");\n\nexport const composeMidiFile = (chords, tempo) => {\n  const track = new MidiWriter.Track();\n  const chordEvents = chords.map(\n    chord =>\n      new MidiWriter.NoteEvent({\n        pitch: chord.notes,\n        duration: chord.duration\n      })\n  );\n  console.log(chords);\n  console.log(chordEvents);\n  track.addEvent(chordEvents);\n  track.setTempo(tempo || 120);\n  const write = new MidiWriter.Writer(track);\n  console.log(write.dataUri());\n  return write.dataUri();\n};\n","const MidiPlayer = require(\"midi-player-js\");\nconst Soundfont = require(\"soundfont-player\");\nconst ac = new AudioContext();\n\nexport const playMidi = async dataUri => {\n  Soundfont.instrument(\n    ac,\n    \"https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FatBoy/acoustic_grand_piano-mp3.js\"\n  ).then(instrument => {\n    const Player = new MidiPlayer.Player(event => {\n      const time = ac.currentTime;\n      console.log(event);\n      event.name === \"Note on\"\n        ? instrument.play(event.noteName, time, { gain: event.velocity / 4 })\n        : console.log(event);\n    });\n    Player.loadDataUri(dataUri);\n    Player.play();\n  });\n};\n\nexport const playMidiThroughOutput = async (dataUri, output) => {\n  const Player = new MidiPlayer.Player(event => {\n    console.log(output);\n    const time = ac.currentTime;\n    console.log(event);\n    event.name === \"Note on\" && output\n      ? output.playNote(event.noteName, \"all\", { duration: time * 100 })\n      : console.log(event);\n  });\n  Player.loadDataUri(dataUri);\n  Player.play();\n};\n","import React, { useState } from \"react\";\nimport { parseSong } from \"../util/songParser\";\nimport { composeMidiFile } from \"../util/composeMidiFile\";\nimport { flatten } from \"ramda\";\nimport { playMidi } from \"../util/playMidi\";\nimport styled from \"styled-components\";\n\nconst handleSubmit = (event, setChords, allChords) => {\n  event.preventDefault();\n  setChords(allChords);\n  const chords = flatten(parseSong(allChords, 4));\n  const midiDataUri = composeMidiFile(chords, 240);\n  playMidi(midiDataUri);\n};\n\nconst Fakebook = props => {\n  const [chords, setChords] = useState(\"\");\n  return (\n    <div\n      style={{\n        width: \"100vh\",\n        height: \"100vh\",\n        alignItems: \"center\",\n        paddingTop: 100\n      }}\n    >\n      <form onSubmit={e => handleSubmit(e, setChords, chords)}>\n        <JazzText value={chords} onChange={e => setChords(e.target.value)} />\n        <input type=\"submit\" value=\"Play\" />\n      </form>\n    </div>\n  );\n};\n\nconst JazzText = styled.textarea`\n  font-size: 64pt;\n`;\n\n//   font-family: Boogaloo-Regular;\n\nexport default styled(Fakebook)``;\n","import React from \"react\";\nimport Tone from \"tone\";\n\nexport const withSynth = Cmp => props => {\n  const synth = new Tone.PolySynth({\n    oscillator: {\n      type: \"fmsquare\",\n      modulationType: \"sawtooth\",\n      modulationIndex: 3,\n      harmonicity: 3.4\n    },\n\n    envelope: {\n      attack: 0.001,\n      decay: 0.1,\n      sustain: 0.1,\n      release: 0.1\n    }\n  }).toMaster();\n\n  const fmSynth = new Tone.FMSynth().toMaster();\n\n  return (\n    <Cmp synth={synth} fmSynth={fmSynth} {...props}>\n      {props.children}\n    </Cmp>\n  );\n};\n","import React, { useRef, useState } from \"react\";\nimport { useFrame } from \"react-three-fiber\";\nimport { withSynth } from \"../util/withSynth\";\nimport { length } from \"ramda\";\n\nconst noteFromRotation = (rotation, notes) => {\n  const index = Math.ceil(rotation * 5) % length(notes);\n  console.log(notes[index]);\n  return notes[index];\n};\n\nexport const Box = props => {\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const [active, setActive] = useState(false);\n  const noteEvent = props.noteEvent;\n  // Rotate mesh every frame, this is outside of React without overhead\n  useFrame(() => {\n    mesh.current.rotation.x = mesh.current.rotation.y += 0.01;\n    mesh.current.rotation.y =\n      noteEvent && noteEvent.includes(\"C\")\n        ? (mesh.current.rotation.y += 1)\n        : mesh.current.rotation.y;\n  });\n  const rotationY = mesh.current ? mesh.current.rotation.y / 3 : 1;\n  return (\n    <mesh\n      {...props}\n      ref={mesh}\n      scale={active ? [1.5, 1.5, 1.5] : [1, 1, 1]}\n      onClick={e => {\n        setActive(!active);\n        console.log(mesh.current.rotation.y);\n        const note = noteFromRotation(rotationY, props.notes);\n        props.synth && props.synth.triggerAttackRelease(note, 0.5);\n        props.midiOut &&\n          props.midiOut.playNote(note, \"all\", { duration: 1000 });\n      }}\n      onPointerOver={e => setHover(true)}\n      onPointerOut={e => setHover(false)}\n    >\n      <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n      <meshStandardMaterial\n        attach=\"material\"\n        color={hovered ? \"#FFFF00\" : \"#00ffff\"}\n      />\n    </mesh>\n  );\n};\n\nexport const SynthBox = withSynth(Box);\n","import React from \"react\";\nimport { Canvas } from \"react-three-fiber\";\n\nexport const ThreeDCanvas = props => {\n  return (\n    <Canvas>\n      <ambientLight />\n      <pointLight position={[10, 10, 10]} />\n      {props.children}\n    </Canvas>\n  );\n};\n","import React from \"react\";\nimport { SynthBox } from \"./Box\";\nimport { ThreeDCanvas } from \"./ThreeDCanvas\";\n\nexport const MidiIn = props => {\n  return (\n    <div style={{ width: \"100vh\", height: \"100vh\", alignItems: \"center\" }}>\n      <div style={{ justifyContent: \"space-between\" }}>\n        <select>\n          {props.midiIns &&\n            props.midiIns.map(input => (\n              <option\n                value={input._midiInput.id}\n                onChange={() => props.setMidiInId(input._midiInput.id)}\n              >\n                {input._midiInput.name}\n              </option>\n            ))}\n        </select>\n      </div>\n      <ThreeDCanvas>\n        <SynthBox\n          noteEvent={props.noteEvent}\n          notes={[\"A4\", \"C5\", \"D3\", \"E4\", \"G4\", \"A3\", \"C4\", \"D5\", \"E4\", \"G4\"]}\n          position={[0, 0, 0]}\n        />\n      </ThreeDCanvas>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { parseSong } from \"../util/songParser\";\nimport { composeMidiFile } from \"../util/composeMidiFile\";\nimport { flatten } from \"ramda\";\nimport { playMidiThroughOutput } from \"../util/playMidi\";\nimport styled from \"styled-components\";\nimport { Box } from \"./Box\";\nimport { ThreeDCanvas } from \"./ThreeDCanvas\";\n\nconst handleSubmit = (event, setChords, allChords, output) => {\n  event.preventDefault();\n  setChords(allChords);\n  const chords = flatten(parseSong(allChords, 4));\n  const midiDataUri = composeMidiFile(chords, 240);\n  playMidiThroughOutput(midiDataUri, output);\n};\n\nconst MidiOut = props => {\n  const [chords, setChords] = useState(\"\");\n  const [noteBoxes, setNoteBoxes] = useState([\n    [\"A4\", \"C4\", \"D4\", \"E4\", \"G4\"],\n    [\"G4\", \"A4\", \"B4\", \"Db4\", \"Eb4\", \"F4\"]\n  ]);\n\n  console.log(props, setNoteBoxes);\n  return (\n    <div\n      style={{\n        width: \"100vh\",\n        height: \"100vh\",\n        alignItems: \"center\",\n        paddingTop: 100\n      }}\n    >\n      <select>\n        {props.midiOuts &&\n          props.midiOuts.map(output => (\n            <option\n              value={output._midiOutput.id}\n              onChange={() => props.setMidiOutId(output._midiInput.id)}\n            >\n              {output._midiOutput.name}\n            </option>\n          ))}\n      </select>\n      <form onSubmit={e => handleSubmit(e, setChords, chords, props.midiOut)}>\n        <MidiText value={chords} onChange={e => setChords(e.target.value)} />\n        <input type=\"submit\" value=\"Play\" />\n      </form>\n\n      <ThreeDCanvas>\n        {noteBoxes.map((notes, i) => (\n          <Box\n            key={i}\n            midiOut={props.midiOut}\n            notes={notes}\n            position={[-i * 2, 0, 0]}\n          />\n        ))}\n      </ThreeDCanvas>\n    </div>\n  );\n};\n\nconst MidiText = styled.textarea`\n  font-size: 32pt;\n  font-family: Arial;\n`;\n\nexport default MidiOut;\n","import React, { useState, useEffect } from \"react\";\nimport WebMidi from \"webmidi\";\nimport { withSynth } from \"./withSynth\";\nimport { compose, length } from \"ramda\";\n\nexport const withWebMidi = Cmp => props => {\n  const [noteEvent, setNoteEvent] = useState();\n  const [midiOutId, setMidiOutId] = useState();\n  const [midiOut, setMidiOut] = useState();\n  // const [midiIn, setMidiIn] = useState();\n  const [midiInId, setMidiInId] = useState();\n  const [midiOuts, setMidiOuts] = useState();\n  const [midiIns, setMidiIns] = useState();\n\n  useEffect(() => {\n    WebMidi.enable(() => {\n      console.log(WebMidi.inputs);\n      console.log(WebMidi.outputs);\n      setMidiIns(WebMidi.inputs);\n      setMidiOuts(WebMidi.outputs);\n      if (length(WebMidi.inputs) > 0 && length(WebMidi.outputs) > 0) {\n        const input = WebMidi.getInputById(\n          midiInId || WebMidi.inputs[1]._midiInput.id\n        );\n        // const output = WebMidi.getOutputById(\"1295864820\");\n        const output = WebMidi.getOutputById(\n          midiOutId || WebMidi.outputs[1]._midiOutput.id\n        );\n\n        setMidiOut(output);\n        input.addListener(\"noteon\", \"all\", e => {\n          console.log(\n            \"Received 'noteon' message (\" + e.note.name + e.note.octave + \").\"\n          );\n          const note = e.note.name + e.note.octave;\n          setNoteEvent(note);\n          props.synth.triggerAttackRelease(note, 1.5);\n        });\n        input.removeListener(\"noteoff\");\n      }\n    });\n  }, [midiOutId, midiInId, midiIns, midiOuts]);\n\n  return (\n    <Cmp\n      noteEvent={noteEvent}\n      midiOuts={midiOuts}\n      setMidiOutId={setMidiOutId}\n      midiIns={midiIns}\n      setMidiInId={setMidiInId}\n      midiOut={midiOut}\n      {...props}\n    >\n      {props.children}\n    </Cmp>\n  );\n};\n\nexport const withMidi = compose(withSynth, withWebMidi);\n","import React from \"react\";\n\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport Fakebook from \"./components/Fakebook\";\nimport { MidiIn } from \"./components/MidiIn\";\nimport MidiOut from \"./components/MidiOut\";\nimport { withMidi } from \"./util/withMidi\";\nimport styled from \"styled-components\";\n\nexport const Routes = props => {\n  return (\n    <Router basename={\"/\"}>\n      <div style={{ flexDirection: \"row\" }}>\n        <SideNav>\n          <div>\n            <Link to=\"/fakebook\">Fakebook</Link>\n          </div>\n          <div>\n            <Link to=\"/midi-in\">midi-in</Link>\n          </div>\n          <div>\n            <Link to=\"/midi-out\">midi-out</Link>\n          </div>\n          {/* <Link to=\"/midi-chat\">midi-chat</Link> */}\n        </SideNav>\n        <Switch>\n          <Route path=\"/fakebook\">\n            <Fakebook />\n          </Route>\n          <Route path=\"/midi-in\">\n            <MidiIn {...props} />\n          </Route>\n          <Route path=\"/midi-out\">\n            <MidiOut {...props} />\n          </Route>\n          <Route path=\"/\" component={Fakebook}></Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nconst SideNav = styled.div`\n  height: 100%;\n  width: 50;\n  left: 0;\n  z-index: 20;\n  position: fixed;\n  flex: 1;\n  background-color: #ff00ff;\n  justify-content: left;\n`;\n\nexport default withMidi(Routes);\n","import React from \"react\";\nimport \"./App.css\";\nimport Routes from \"./Routes\";\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Routes />\n      </header>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}