(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(19),i=n.n(r),c=(n(42),n(44),n(7)),u=n(57),l=n(11),s=n(2),m=n(74),d=n(106),p=function(e){var t=e.chords,n=e.octave,a=e.loop,o=Object(d.a)(t,a).join("|");console.log(o,":::LOOP");var r=o.split("|"),i=h(r),c=v(i,n);return console.log(c,":::SONG"),c},h=function(e){return e.map(function(e){return e.split(" ")}).map(function(e){return e.filter(function(e){return e.length>0})})},v=function(e,t){return e.map(function(e){return e.map(function(n){return{notes:m.a.notes(n).map(function(e,n){return"".concat(e).concat(t+function(e){return e%2===0?1:0}(n))}),octave:t,chord:n,duration:e.length>1?"2":"1"}})})},b=n(54),f=n(55),E=n(104),_=n(46),g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new _.Track,r=new _.Track,i=new _.Track;e.map(function(e){return"2"===e.duration?Object(d.a)(new _.NoteEvent({pitch:Object(b.a)(1,1/0,e.notes),duration:"2"}),1):Object(d.a)(new _.NoteEvent({pitch:Object(b.a)(1,1/0,e.notes),duration:"1"}),1)}).map(function(e){return o.addEvent(e)}),n&&e.map(function(e){y(e,r)}),e.map(function(e){a&&w(e,i)}),o.setTempo(t||120);var c=new _.Writer([o,r]);return console.log(c.dataUri()),c.dataUri()},O=function(e){var t=j(Object(f.a)(e)),n=j(t),a=j(n);return a[Math.floor(Math.random()*a.length)]},j=function(e){return Object(E.a)(e,Object(b.a)(1,1/0,e))},y=function(e,t){return"2"===e.duration?(t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"}))):(t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})))},w=function(e,t){return"2"===e.duration?(t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"}))):(t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})),t.addEvent(new _.NoteEvent({pitch:"".concat(O(e.notes).charAt(0),"2"),duration:"4"})))},x=n(107),C=n(22),A=n.n(C),N=n(33),k=n(78),D=n(79),G=new AudioContext,S=function(){var e=Object(N.a)(A.a.mark(function e(t,n){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.instrument(G,"https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FatBoy/".concat(n,"-mp3.js")).then(function(e){var n=new k.Player(function(t){var n=G.currentTime;console.log(t),"Note on"===t.name?e.play(t.noteName,n,{gain:t.velocity/4}):console.log(t)});n.loadDataUri(t),n.play()});case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(N.a)(A.a.mark(function e(t,n){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new k.Player(function(e){console.log(n);var t=G.currentTime;console.log(e),"Note on"===e.name&&n?n.playNote(e.noteName,"all",{time:t}):console.log(e)})).loadDataUri(t),a.play();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),B=n(8),M=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"];function z(){var e=Object(c.a)([""]);return z=function(){return e},e}function F(){var e=Object(c.a)(["\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100px;\n"]);return F=function(){return e},e}function T(){var e=Object(c.a)(["\n  font-size: 12pt;\n"]);return T=function(){return e},e}function P(){var e=Object(c.a)(["\n  font-size: 32pt;\n  width: 800px;\n  height: 400px;\n"]);return P=function(){return e},e}function R(){var e=Object(c.a)(["\n  padding: 20;\n"]);return R=function(){return e},e}var L=B.a.div(R()),U=B.a.textarea(P()),J=B.a.text(T()),W=B.a.div(F()),q=Object(B.a)(function(e){var t=Object(a.useState)("BMaj7 D7 | GMaj7 Bb7 | EbMaj7 | Am7 D7 | GMaj7 Bb7 | EbMaj7 F#7 | BMaj7| Fm7 Bb7 | EbMaj7 | Am7 D7 | GMaj7 | C#m7 F#7 | BMaj7 | Fm7 Bb7| EbMaj7 | C#m7 F#7"),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(240),u=Object(s.a)(c,2),l=u[0],m=u[1],d=Object(a.useState)(1),h=Object(s.a)(d,2),v=h[0],b=h[1],f=Object(a.useState)(!1),E=Object(s.a)(f,2),_=E[0],O=E[1],j=Object(a.useState)("bright_acoustic_piano"),y=Object(s.a)(j,2),w=y[0],C=y[1];return o.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center",paddingTop:100}},o.a.createElement("form",{onSubmit:function(e){return function(e){var t=e.e,n=e.allChords,a=e.tempo,o=e.instrument,r=e.loop,i=e.bass;t.preventDefault();var c=Object(x.a)(p({chords:n,octave:4,loop:r}));console.log(c,":::CHORDS");var u=g(c,a,i);S(u,o)}({e:e,allChords:r,tempo:l,instrument:w,loop:v,bass:_})}},o.a.createElement(U,{value:r,onChange:function(e){return i(e.target.value)}}),o.a.createElement(W,null,o.a.createElement(J,null,"Tempo:"),o.a.createElement("input",{value:l,type:"number",onChange:function(e){m(e.target.value)}}),o.a.createElement(L,null),o.a.createElement(J,null,"Repeat:"),o.a.createElement("input",{value:v,type:"number",onChange:function(e){b(e.target.value)}}),o.a.createElement(L,null),o.a.createElement(J,null,"Instrument:"),o.a.createElement("select",{value:w,onChange:function(e){return C(e.target.value)}},M.map(function(e){return o.a.createElement("option",null,e)})),o.a.createElement(L,null),o.a.createElement(J,null,"Bassline:"),o.a.createElement("select",{value:_,onChange:function(e){return O(e.target.value)}},o.a.createElement("option",{value:!0},"true"),o.a.createElement("option",{value:!1},"false")),o.a.createElement("input",{type:"submit",value:"Play"}))))})(z()),H=n(60),$=n(56),K=n.n($),Q=(new K.a.Tremolo).start(),V=function(e){return function(t){var n=new K.a.PolySynth({oscillator:{type:"fmsquare",modulationType:"sawtooth",modulationIndex:3,harmonicity:3.4},envelope:{attack:.001,decay:.1,sustain:.1,release:.1}}).chain(Q,K.a.Master),a=(new K.a.FMSynth).toMaster();return o.a.createElement(e,Object.assign({synth:n,fmSynth:a},t),t.children)}},X=n(108),Y=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),i=r[0],c=r[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),m=l[0],d=l[1],p=e.noteEvent;Object(H.b)(function(){t.current.rotation.x=t.current.rotation.y+=.01,t.current.rotation.y=p&&p.includes(e.activationNotes[0])?t.current.rotation.y+=1:t.current.rotation.y,t.current.position.z=p&&p.includes(e.activationNotes[1])?t.current.position.z+=.01:t.current.position.z,t.current.position.z=p&&p.includes(e.activationNotes[2])?t.current.position.z-=.01:t.current.position.z,t.current.position.y=p&&p.includes(e.activationNotes[3])?t.current.position.y-=.01:t.current.position.y,t.current.position.y=p&&p.includes(e.activationNotes[4])?t.current.position.y+=.01:t.current.position.y,t.current.position.x=p&&p.includes(e.activationNotes[5])?t.current.position.x-=.01:t.current.position.x,t.current.position.x=p&&p.includes(e.activationNotes[6])?t.current.position.x+=.01:t.current.position.x});var h=t.current?t.current.rotation.y/3:1;return o.a.createElement("mesh",Object.assign({},e,{ref:t,scale:m?[.7,.7,.7]:[.5,.5,.5],onClick:function(n){d(!m),console.log(t.current.rotation.y);var a=function(e,t){var n=Math.ceil(5*e)%Object(X.a)(t);return console.log(t[n]),t[n]}(h,e.notes);e.synth&&e.synth.triggerAttackRelease(a,.5),e.midiOut&&e.midiOut.playNote(a,"all",{duration:1e3})},onPointerOver:function(e){return c(!0)},onPointerOut:function(e){return c(!1)}}),o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:i?"#FFFF00":"#00ffff"}))},Z=V(Y),ee=function(e){return o.a.createElement(H.a,{style:{width:"100vw",height:"100vh"}},o.a.createElement("ambientLight",null),o.a.createElement("pointLight",{position:[10,10,10]}),e.children)},te=function(e){return o.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center"}},o.a.createElement("div",{style:{justifyContent:"space-between"}},o.a.createElement("select",null,e.midiIns&&e.midiIns.map(function(t){return o.a.createElement("option",{value:t._midiInput.id,onChange:function(){return e.setMidiInId(t._midiInput.id)}},t._midiInput.name)}))),o.a.createElement(ee,null,o.a.createElement(Z,{noteEvent:e.noteEvent,activationNotes:["C","D","F","G","B","E","F"],notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[1,0,0]}),o.a.createElement(Z,{noteEvent:e.noteEvent,activationNotes:["Bb","Ab","D","F","E","F","G"],notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[1,1,0]}),o.a.createElement(Z,{noteEvent:e.noteEvent,activationNotes:["E","Gb","C","D","B","Bb","Eb"],notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[1,-1,0]}),o.a.createElement(Z,{noteEvent:e.noteEvent,activationNotes:["Eb","Gb","C","A","C","D","B"],notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[-2,-1,1]}),o.a.createElement(Z,{noteEvent:e.noteEvent,activationNotes:["D","E","C","G","Eb","Gb","C"],notes:["A4","C5","D3","E4","G4","A3","C4","D5","E4","G4"],position:[-3,-1,1]})))};function ne(){var e=Object(c.a)(["\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100px;\n"]);return ne=function(){return e},e}function ae(){var e=Object(c.a)(["\n  font-size: 12pt;\n"]);return ae=function(){return e},e}function oe(){var e=Object(c.a)(["\n  padding: 20;\n"]);return oe=function(){return e},e}function re(){var e=Object(c.a)(["\n  font-size: 32pt;\n  font-family: Arial;\n"]);return re=function(){return e},e}var ie=B.a.textarea(re()),ce=B.a.div(oe()),ue=B.a.text(ae()),le=B.a.div(ne()),se=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(160),u=Object(s.a)(c,2),l=u[0],m=u[1],d=Object(a.useState)(1),h=Object(s.a)(d,2),v=h[0],b=h[1],f=Object(a.useState)(!1),E=Object(s.a)(f,2),_=E[0],O=E[1],j=Object(a.useState)([["A4","C4","D4","E4","G4"],["G4","A4","B4","Db4","Eb4","F4"],["A5","Db5","Eb5","E5","G2"],["G4","A4","B4","Db4","Eb4","F4"],["A5","Db5","Eb5","E5","G2"]]),y=Object(s.a)(j,2),w=y[0],C=y[1];return console.log(e,C),o.a.createElement(o.a.Fragment,null,o.a.createElement("select",null,e.midiOuts&&e.midiOuts.map(function(t){return o.a.createElement("option",{value:t._midiOutput.id,onChange:function(){return e.setMidiOutId(t._midiInput.id)}},t._midiOutput.name)})),o.a.createElement("form",{onSubmit:function(t){return function(e){var t=e.e,n=e.allChords,a=e.output,o=e.tempo,r=e.loop,i=e.bass;t.preventDefault();var c=Object(x.a)(p({chords:n,octave:4,loop:r})),u=g(c,o,i);I(u,a)}({e:t,allChords:r,output:e.midiOut,loop:v,tempo:l,bass:_})}},o.a.createElement(ie,{value:r,onChange:function(e){return i(e.target.value)}}),o.a.createElement("input",{type:"submit",value:"Play"})),o.a.createElement("div",{style:{width:"100vh",height:"100vh",alignItems:"center",paddingTop:100}},o.a.createElement(le,null,o.a.createElement(ue,null,"Tempo:"),o.a.createElement("input",{value:l,type:"number",onChange:function(e){m(e.target.value)}}),o.a.createElement(ce,null),o.a.createElement(ue,null,"Repeat:"),o.a.createElement("input",{value:v,type:"number",onChange:function(e){b(e.target.value)}}),o.a.createElement(ce,null),o.a.createElement(ue,null,"Bassline:"),o.a.createElement("select",{value:_,onChange:function(e){return O(e.target.value)}},o.a.createElement("option",{value:!0},"true"),o.a.createElement("option",{value:!1},"false")),o.a.createElement("input",{type:"submit",value:"Play"})),o.a.createElement(ee,{style:{width:"100vw",height:"100vh"}},w.map(function(t,n){return n%2!==0?o.a.createElement(Y,{key:n,midiOut:e.midiOut,notes:t,position:[-n,.5,0]}):o.a.createElement(Y,{key:n,midiOut:e.midiOut,notes:t,position:[n-4,2,0]})}))))},me=n(13),de=n.n(me),pe=n(105),he=Object(pe.a)(V,function(e){return function(t){var n=Object(a.useState)(),r=Object(s.a)(n,2),i=r[0],c=r[1],u=Object(a.useState)(),l=Object(s.a)(u,2),m=l[0],d=l[1],p=Object(a.useState)(),h=Object(s.a)(p,2),v=h[0],b=h[1],f=Object(a.useState)(),E=Object(s.a)(f,2),_=E[0],g=E[1],O=Object(a.useState)(),j=Object(s.a)(O,2),y=j[0],w=j[1],x=Object(a.useState)(),C=Object(s.a)(x,2),A=C[0],N=C[1];return Object(a.useEffect)(function(){de.a.enable(function(){if(console.log(de.a.inputs),console.log(de.a.outputs),N(de.a.inputs),w(de.a.outputs),Object(X.a)(de.a.inputs)>0&&Object(X.a)(de.a.outputs)>0){var e=de.a.getInputById(_||de.a.inputs[1]._midiInput.id),n=de.a.getOutputById(m||de.a.outputs[1]._midiOutput.id);b(n),e.addListener("noteon","all",function(e){console.log("Received 'noteon' message ("+e.note.name+e.note.octave+").");var n=e.note.name+e.note.octave;c(n),t.synth.triggerAttackRelease(n,.5)}),e.removeListener("noteoff")}})},[m,_,A,y]),o.a.createElement(e,Object.assign({noteEvent:i,midiOuts:y,setMidiOutId:d,midiIns:A,setMidiInId:g,midiOut:v},t),t.children)}});function ve(){var e=Object(c.a)(["\n  height: 100%;\n  width: 50;\n  left: 0;\n  z-index: 20;\n  position: fixed;\n  flex: 1;\n  background-color: #ff00ff;\n  justify-content: left;\n"]);return ve=function(){return e},e}var be=B.a.div(ve()),fe=he(function(e){return o.a.createElement(u.a,{basename:"/"},o.a.createElement("div",{style:{flexDirection:"row"}},o.a.createElement(be,null,o.a.createElement("div",null,o.a.createElement(u.b,{to:"/fakebook"},"Jazzbot")),o.a.createElement("div",null,o.a.createElement(u.b,{to:"/midi-in"},"midi-in")),o.a.createElement("div",null,o.a.createElement(u.b,{to:"/midi-out"},"midi-out"))),o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/fakebook"},o.a.createElement(q,null)),o.a.createElement(l.a,{path:"/midi-in"},o.a.createElement(te,e)),o.a.createElement(l.a,{path:"/midi-out"},o.a.createElement(se,e)),o.a.createElement(l.a,{path:"/",component:q}))))}),Ee=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(fe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,n){e.exports=n(103)},42:function(e,t,n){},44:function(e,t,n){}},[[37,2,1]]]);
//# sourceMappingURL=main.e685f513.chunk.js.map